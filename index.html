<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒêƒÉng k√Ω kh√°m s·ª©c kh·ªèe</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
      background: linear-gradient(to bottom, #d0ebff, #ffffff);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .container {
      background-color: #fff;
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 600px;
      padding: 25px;
    }
    .container h1 {
      text-align: center;
      margin-top: 0;
      color: #1a237e;
    }
    .form-field {
      margin-bottom: 15px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }
    input, select, button {
      padding: 10px;
      font-size: 16px;
      width: 100%;
      border-radius: 4px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .input-group {
      display: flex;
      gap: 10px;
    }
    .input-group input {
      flex: 1;
    }
    .input-group button {
      flex-shrink: 0;
      padding: 10px 15px;
      background: #4dabf7;
      color: white;
      border: none;
      cursor: pointer;
    }
    .input-group button:hover {
      background: #228be6;
    }
    .dob-group {
      display: flex;
      gap: 10px;
    }
    .dob-group input {
      width: 100%;
      max-width: 80px;
    }
    .schedule-group {
      margin-bottom: 20px;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    .schedule-group strong {
      display: block;
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: #1a237e;
      font-weight: 700;
      border-bottom: 1px solid #ccc;
      padding-bottom: 4px;
    }
    .schedule-option {
      margin: 4px 0;
    }
    .schedule-option label {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: normal;
    }
    button[type="submit"] {
      background: #007bff;
      color: white;
      font-size: 16px;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }
    button[type="submit"]:hover {
      background: #0056b3;
    }
    #statusMessage {
      margin-top: 10px;
      font-weight: bold;
      color: green;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Form ƒêƒÉng K√Ω Kh√°m S·ª©c Kh·ªèe T·∫°i Mirai</h1>
    <form id="registrationForm">
      <div class="form-field">
        <label for="employeeId">M√£ nh√¢n vi√™n *</label>
        <div class="input-group">
          <input type="text" id="employeeId" required />
          <button type="button" id="checkCodeBtn">T·∫£i l·∫°i th√¥ng tin</button>
        </div>
      </div>
      <div class="form-field">
        <label for="fullName">H·ªç v√† t√™n</label>
        <input type="text" id="fullName">
      </div>
      <div class="form-field">
        <label>Ng√†y sinh</label>
        <div class="dob-group">
          <input type="number" id="dob-day" min="1" max="31" placeholder="Ng√†y">
          <input type="number" id="dob-month" min="1" max="12" placeholder="Th√°ng">
          <input type="number" id="dob-year" min="1900" max="2100" placeholder="NƒÉm">
        </div>
      </div>
      <div class="form-field">
        <label for="gender">Gi·ªõi t√≠nh</label>
        <select id="gender">
          <option value="">-- Ch·ªçn --</option>
          <option value="Nam">Nam</option>
          <option value="N·ªØ">N·ªØ</option>
          <option value="Kh√°c">Kh√°c</option>
        </select>
      </div>

      <h2>Ch·ªçn 1 khung gi·ªù kh√°m duy nh·∫•t</h2>
      <div id="scheduleContainer"></div>

      <div id="statusMessage"></div>
      <button type="submit">ƒêƒÉng k√Ω</button>
    </form>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("registrationForm");
      const scheduleContainer = document.getElementById("scheduleContainer");
      const statusMessage = document.getElementById("statusMessage");

      const days = ["Ng√†y 12/05/2025","Ng√†y 13/05/2025","Ng√†y 14/05/2025","Ng√†y 15/05/2025","Ng√†y 16/05/2025","Ng√†y 19/05/2025","Ng√†y 20/05/2025","Ng√†y 21/05/2025","Ng√†y 22/05/2025","Ng√†y 23/05/2025"];
      const slots = [
        "8h00 - 9h00", "9h00 - 10h00", "10h00 - 11h00", "11h00 - 12h00",
        "13h00 - 14h00", "14h00 - 15h00", "15h00 - 16h00", "16h00 - 17h00"
      ];

      const slotLimits = {
        "8h00 - 9h00": 30, "9h00 - 10h00": 29, "10h00 - 11h00": 28,
        "11h00 - 12h00": 27, "13h00 - 14h00": 26, "14h00 - 15h00": 25,
        "15h00 - 16h00": 24, "16h00 - 17h00": 23
      };

      const slotCounts = {
        "Ng√†y 12/05/2025|8h00 - 9h00": 30,
        "Ng√†y 14/05/2025|13h00 - 14h00": 20
      };

      function renderSchedule() {
        scheduleContainer.innerHTML = "";
        days.forEach(day => {
          const group = document.createElement("div");
          group.className = "schedule-group";
          group.innerHTML = `<strong>${day}</strong>`;
          slots.forEach(slot => {
            const value = `${day}|${slot}`;
            const count = slotCounts[value] || 0;
            const limit = slotLimits[slot] || 10;
            const disabled = count >= limit ? "disabled" : "";
            const labelText = count >= limit ? `${slot} (ƒë√£ ƒë·ªß)` : `${slot} (${count}/${limit})`;

            const id = `slot-${day.replace("/", "_")}-${slot.replace(/\s|-/g, "")}`;
            const option = document.createElement("div");
            option.className = "schedule-option";
            option.innerHTML = `
              <label>
                <input type="radio" name="schedule" value="${value}" id="${id}" ${disabled} />
                <span>${labelText}</span>
              </label>
            `;
            group.appendChild(option);
          });
          scheduleContainer.appendChild(group);
        });

        document.querySelectorAll("input[name='schedule']").forEach(radio => {
          radio.addEventListener("change", () => {
            document.querySelectorAll("input[name='schedule']").forEach(r => {
              if (r !== radio) r.checked = false;
            });
          });
        });
      }

      renderSchedule();

      document.getElementById("checkCodeBtn").addEventListener("click", () => {
        const id = document.getElementById("employeeId").value.trim();
        if (!id) return;

        const demoData = {
          found: true,
          fullName: "Nguy·ªÖn VƒÉn A",
          dob: "01/01/1990",
          gender: "Nam",
          selectedSlot: "Ng√†y 14/05/2025|13h00 - 14h00"
        };

        document.getElementById("fullName").value = demoData.fullName;
        const [d, m, y] = demoData.dob.split("/");
        document.getElementById("dob-day").value = d;
        document.getElementById("dob-month").value = m;
        document.getElementById("dob-year").value = y;
        document.getElementById("gender").value = demoData.gender;

        const radio = document.querySelector(`input[value='${demoData.selectedSlot}']`);
        if (radio && !radio.disabled) radio.checked = true;

        statusMessage.innerText = demoData.found ? "‚úÖ ƒê√£ n·∫°p d·ªØ li·ªáu m·∫´u" : "Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu";
      });

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const slotValue = document.querySelector("input[name='schedule']:checked")?.value || "";
        const data = {
          employeeId: document.getElementById("employeeId").value,
          fullName: document.getElementById("fullName").value,
          dob: combineDOB(),
          gender: document.getElementById("gender").value,
          selectedSlot: slotValue
        };

        if (!data.employeeId || !slotValue) {
          statusMessage.innerText = "‚ùó Vui l√≤ng nh·∫≠p m√£ nh√¢n vi√™n v√† ch·ªçn 1 khung gi·ªù.";
          return;
        }

        console.log("üì• D·ªØ li·ªáu g·ª≠i:", data);
        statusMessage.innerText = "‚úÖ D·ªØ li·ªáu ƒë√£ ƒë∆∞·ª£c ghi v√†o console.";
      });

      function combineDOB() {
        const day = document.getElementById("dob-day").value.padStart(2, "0");
        const month = document.getElementById("dob-month").value.padStart(2, "0");
        const year = document.getElementById("dob-year").value;
        if (!day || !month || !year) return "";
        return `${day}/${month}/${year}`;
      }
    });
  </script>
</body>
</html>
